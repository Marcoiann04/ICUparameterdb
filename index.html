<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="UTF-8" />
<title>OCR + Estrazione dati</title>
</head>
<body>
  <h1>Upload immagine per estrazione dati</h1>
  <input type="file" id="fileInput" />
  <button id="uploadBtn">Estrai dati</button>
  <pre id="result"></pre>

  <script>
    const uploadBtn = document.getElementById('uploadBtn');
    const fileInput = document.getElementById('fileInput');
    const resultEl = document.getElementById('result');

    uploadBtn.onclick = async () => {
      if (!fileInput.files.length) return alert('Seleziona un file');
      const file = fileInput.files[0];
      const formData = new FormData();
      formData.append('image', file);

      resultEl.textContent = 'Elaborazione...';

      const response = await fetch('http://localhost:3000/upload', {
        method: 'POST',
        body: formData,
      });
      const data = await response.json();

      if(data.error){
        resultEl.textContent = 'Errore: ' + data.error;
      } else {
        // Visualizza testo OCR raw (poi si fa parsing)
        resultEl.textContent = data.text;
      }
    };
  </script>
</body>
</html>
